(function(){"use strict";let e;importScripts("https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyodide.js");async function s(){e=await loadPyodide(),console.log("pyodide loaded"),await e.loadPackage(["numpy","pytz"]),await e.runPython(await(await fetch("/public/pycsg.py")).text()),self.postMessage({type:"pyodideready"})}let d=s();onmessage=async t=>{console.log(t.data),await d;try{await e.runPython("clearobjects()"),await e.runPython(t.data);let a=await e.runPython("makescenejson()");res=JSON.parse(a),midstring=res.shader,shaderstring=midstring,postMessage({shaderstring})}catch(a){postMessage({error:a})}}})();
