(function(){"use strict";let e;importScripts("https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyodide.js");async function t(){e=await loadPyodide(),console.log("pyodide loaded"),await e.loadPackage(["numpy","pytz"]),self.postMessage({type:"pyodideready"})}let d=t();onmessage=async s=>{await d,console.log(s);try{s.data.run!="first"&&await e.runPython("clearobjects()"),await e.runPython(s.data.code);let a=await e.runPython("makescenejson()");res=JSON.parse(a),midstring=res.shader,shaderstring=midstring,postMessage({shaderstring})}catch(a){postMessage({error:a})}}})();
